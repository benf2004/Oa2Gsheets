//save the file in index.php
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Picker Example</title>
 <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
 <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script>
    function onApiLoad(){
        gapi.load('auth',{'callback':onAuthApiLoad}); 
        gapi.load('picker', {'callback': onPickerApiLoad});
    }
    function onAuthApiLoad(){
        window.gapi.auth.authorize({
            'client_id':'654389885336-re4m337upgk4igdbu3q4jab9id3sp2qd.apps.googleusercontent.com',
            'scope':['https://www.googleapis.com/auth/drive'],
            'immediate': false
        },handleAuthResult);
    } 
    function onPickerApiLoad() {
                pickerApiLoaded = true;
                createPicker();
            }
    var oauthToken;
    function handleAuthResult(authResult){
        if(authResult && !authResult.error){
            oauthToken = authResult.access_token;
            createPicker();
        }
    }
    function createPicker(){    
        if (pickerApiLoaded && oauthToken) {
var view = new google.picker.View(google.picker.ViewId.DOCS);
        view.setMimeTypes("text/html");
        var picker = new google.picker.PickerBuilder()
            .addView(new google.picker.DocsUploadView())
            .addView(new google.picker.DocsView())                
            .setOAuthToken(oauthToken)
            .setDeveloperKey('AIzaSyDQSFdTwH861Bfxq1P6fA_paWiUs-lbP6Y')
            .setCallback(pickerCallback)
            .build();
        picker.setVisible(true);
    }
}


    function pickerCallback(data) {
                var url = 'nothing';
                var name = 'nothing';
                if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
                    var doc = data[google.picker.Response.DOCUMENTS][0];
                    url = doc[google.picker.Document.URL];
                    name = doc.name;
                    var param = {'fileId': doc.id, 'oAuthToken': oauthToken, 'name': name}
                    console.log(param);
                    document.getElementById('result').innerHTML = "Downloading...";
                    $.post('down.php', param,
                            function (returnedData) {
                                document.getElementById('result').innerHTML = "Download completed";
                            });
                            }
                        }

</script>
  </head>
  <body>
  <button onclick="onApiLoad()">Pick From Google Drive</button>
    <div id="result"></div>
    <script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
  </body>
</html>
